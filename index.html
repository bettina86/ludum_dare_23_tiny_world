<html>
<head>
	<title>Aardvark Island Treasure</title>
</head>
<link id="main_css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
<!--

var script_files = [
	"game.js",
	"game_illustrated.js",
	"game_classic.js",
	"game_data.js",
], script_count = -1;

function init() {
	if(++script_count == script_files.length) {
		init_locations();
		set_ui(illustrated_ui);
		new_game();
	} else {
		if(0 == script_count) {
			// monkey patch String
			if(typeof String.prototype.startsWith === "undefined")
				String.prototype.startsWith = function (str) { return this.indexOf(str) == 0; };
			if(typeof String.prototype.trim === "undefined") 
				String.prototype.trim = function () { return this.replace(/^\s+|\s+$/g,''); }; 
			setTimeout(function() {
				if(script_count != script_files.length)
					alert("its taking a long time to load all "+
					"the required javascript scripts;\nmaybe something "+
					"is wrong?\n(only got as far as "+script_files[script_count]+")");
			},script_files.length*3000);
		}
		console.log("loading "+script_files[script_count]+"...");
		var script = document.createElement('script');
		script.setAttribute("type","text/javascript");
		script.setAttribute("src",script_files[script_count]);
		script.async = true;
		script.onload = init;
		document.getElementsByTagName("head")[0].appendChild(script);
	}
}

function toggle_soundtrack() {
	var soundtrack = document.getElementById("soundtrack"),
		button = document.getElementById("soundtrack_button");
	console.log(soundtrack,soundtrack.pause);
	if(soundtrack.src) {
		soundtrack.src = null;
		button.innerHTML = "start music";
	} else {
		soundtrack.src = "music1.mp3";
		button.innerHTML = "stop music";
	}
}

//-->
</script>
<body onload="init();">
	<noscript>
		Without Javascript, there's nothing to see here; move along!
	</noscript>
	<div style="width:100%; height:100%; overflow-y:scroll; overflow-x:scroll; position:relative; margin:0px; padding:0px;">
		<div id="soundtrack_control" style="float:right;">
			<embed id="soundtrack" src="music1.mp3" loop="true" hidden="false" autostart="true" width="100" height="20"></embed>
			<!--button id="soundtrack_button" type="button" onclick="toggle_soundtrack();">stop soundtrack</button-->
		</div>
		<div id="main" style="margin:0px; padding:0px;">
		</div>
	</div>
</body>
</html>
